document.addEventListener("alpine:init",(()=>{Alpine.data("managerFrm",(()=>({modalStatus:new bootstrap.Modal(document.getElementById("modal-status")),data:{_token:document.head.querySelector("meta[name=csrf-token]").content,_method:null!==document.querySelector('input[name="_method"]')?document.querySelector('input[name="_method"]').value:""},userRegistration:["77777","999999","111111"],loading:!1,buttonLabel:"Gravar",cleanFields(){this.data.day_delete_old_raw_files="",this.data.year_delete_old_zipped_files="",this.data.year_maintain_batches="",this.data.month_recurrence="",this.data.user_registration="",document.getElementById("day_delete_old_raw_files").value="",document.getElementById("year_delete_old_zipped_files").value="",document.getElementById("year_maintain_batches").value="",document.getElementById("month_recurrence").value="",document.getElementById("user_registration").value=""},setModalStatus(e,t){document.getElementById("title-modal-status").innerText=e,document.getElementById("desc-status-modal").innerText=t},submitData(){$("#frm").valid()&&(this.data.day_delete_old_raw_files=document.getElementById("day_delete_old_raw_files").value,this.data.year_delete_old_zipped_files=document.getElementById("year_delete_old_zipped_files").value,this.data.year_maintain_batches=document.getElementById("year_maintain_batches").value,this.data.month_recurrence=document.getElementById("month_recurrence").value,this.data.user_registration=$("#user_registration").val().join(","),console.log(this.data),this.buttonLabel="Aguarde...",this.loading=!0,fetch(document.getElementById("frm").action,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(this.data)}).then((e=>{1!=e.ok&&this.setModalStatus("Algo errado!","Se persistir, fale com o administrador!"),e.json().then((e=>{e.status?this.setModalStatus("Muito bom!","Configuração aplicada com sucesso!"):this.setModalStatus("Error no processamento!","Se persistir, fale com o administrador!")}))})).catch((()=>{this.setModalStatus("Error grave!","Se persistir, fale com o administrador!")})).finally((()=>{this.loading=!1,this.buttonLabel="Gravar",this.data={},$("#user_registration").val(null).trigger("change"),$("p.error").hide(),table.clear().draw(),table.ajax.reload(),this.cleanFields(),this.modalStatus.show()})))}})))}));
