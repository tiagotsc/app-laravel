document.addEventListener("alpine:init",(()=>{Alpine.data("managerFrm",(()=>({modalStatus:new bootstrap.Modal(document.getElementById("modal-status")),data:{_token:document.head.querySelector("meta[name=csrf-token]").content,_method:null!==document.querySelector('input[name="_method"]')?document.querySelector('input[name="_method"]').value:""},loading:!1,buttonLabel:"Gravar",cleanFields(){this.data.minimum_value="",this.data.month_filter="",this.data.year_filter="",this.data.batch_purge="",this.data.file_archiving="",this.data.month_recurrence="",this.data.protocols_amout="",document.getElementById("minimum_value").value="",document.getElementById("month_filter").value="",document.getElementById("year_filter").value="",document.getElementById("batch_purge").value="",document.getElementById("file_archiving").value="",document.getElementById("month_recurrence").value="",document.getElementById("protocols_amout").value=""},setModalStatus(t,e){document.getElementById("title-modal-status").innerText=t,document.getElementById("desc-status-modal").innerText=e},submitData(){$("#frm").valid()&&(this.buttonLabel="Aguarde...",this.loading=!0,this.data.minimum_value=document.getElementById("minimum_value").value,this.data.month_filter=document.getElementById("month_filter").value,this.data.year_filter=document.getElementById("year_filter").value,this.data.batch_purge=document.getElementById("batch_purge").value,this.data.file_archiving=document.getElementById("file_archiving").value,this.data.month_recurrence=document.getElementById("month_recurrence").value,this.data.protocols_amout=document.getElementById("protocols_amout").value,fetch(document.getElementById("frm").action,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(this.data)}).then((t=>{1!=t.ok&&this.setModalStatus("Algo errado!","Se persistir, fale com o administrador!"),t.json().then((t=>{t.status?this.setModalStatus("Muito bom!","Configuração aplicada com sucesso!"):this.setModalStatus("Error no processamento!","Se persistir, fale com o administrador!")}))})).catch((()=>{this.setModalStatus("Error grave!","Se persistir, fale com o administrador!")})).finally((()=>{this.loading=!1,this.buttonLabel="Gravar",this.data={},table.clear().draw(),table.ajax.reload(),this.cleanFields(),this.modalStatus.show()})))}})))}));
