document.addEventListener("alpine:init",(()=>{Alpine.data("managerFrm",(()=>({data:{},loading:!1,buttonLabel:"Salvar",loadData(){""!=document.getElementById("register_id").value&&(this.buttonLabel="Aguarde...",this.loading=!0,fetch(document.getElementById("route_list").value).then((t=>t.json())).then((t=>{Boolean(t.id)&&(document.getElementById("name").value=t.name,document.getElementById("status").value=t.status.substr(0,1))})).finally((()=>{this.loading=!1,this.buttonLabel="Salvar"})))},submitData(){if($("#frm").valid()){this.buttonLabel="Aguarde...",this.loading=!0;let t=null!==document.querySelector('input[name="_method"]')?document.querySelector('input[name="_method"]').value:"";this.data._method=t,this.data._token=document.head.querySelector("meta[name=csrf-token]").content,this.data.name=document.getElementById("name").value,this.data.status=document.getElementById("status").value,fetch(document.getElementById("frm").action,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(this.data)}).then((t=>{1!=t.ok&&modalStatus("Algo errado!","Se persistir, fale com o administrador!"),t.json().then((t=>{modalStatus("Muito bom!","Salvo com sucesso!"),null!=t.redirect&&(window.location.href=t.redirect)}))})).catch((()=>{modalStatus("Error grave!","Se persistir, fale com o administrador!")})).finally((()=>{new bootstrap.Modal(document.getElementById("modal-status")).show(),this.loading=!1,this.buttonLabel="Salvar"}))}}})))}));
