frmValidate("#frm",{category_id:{required:!0}},{category_id:{required:"Selecione, por favor!"}});var table=$("#list").DataTable({order:[[0,"desc"]],responsive:!0,autoWidth:!1,language:{url:"/assets/plugins/datatables/pt_br.json",select:{rows:{_:"VocÃª selecionou %d linhas",0:"Clique na linha para selecionar",1:"Apenas 1 linha foi selecionada"}},buttons:{copyTitle:"Tabela copiada",copySuccess:{_:"%d linhas copiadas",1:"1 linha copiada"}}},searching:!0,processing:!0,ajax:$("#route_list").val(),initComplete:function(e,a){$((function(){$('[data-toggle="tooltip"]').tooltip()}));var t=table.column(2),i=$('<select class="form-select"><option value="">Todas</option></select>').prependTo($(t.header())).on("change",(function(){var e=$.fn.dataTable.util.escapeRegex($(this).val());t.search(e?"^"+e+"$":"",!0,!1).draw()}));t.data().unique().sort().each((function(e,a){i.append("<option value='"+e+"'>"+e+"</option>")}))},columns:[{data:"id",width:"5%"},{data:"name",width:"30%"},{data:"category.name",width:"15%"},{data:"created_at",width:"15%"},{data:"user.name",width:"20%",render:function(e,a,t){let i=t.user.name.split(" ");return`${i[0]} ${i[i.length-1]}`}},{data:"id",className:"text-center",orderable:!1,width:"7%",render:function(e,a,t){let i=$("#route_download").val().replace("*",t.id),o=$("#route_destroy").val().replace("*",t.id);return`<a href="${i}"><i class="bi bi-download fs-5"></i></a>\n                        ${`<a href="#" data-bs-toggle="modal" data-bs-target="#delete-register" class="destroy ms-2 text-danger" data_id="${t.id}" data_url="${o}" data_name="${t.name}"><i class="bi bi-trash fs-5"></i></a>`}`}}]});$("#list tbody").on("click",".destroy",(function(e){e.preventDefault();let a=$(this).attr("data_url"),t=$(this).attr("data_name"),i=$(this);feedsDeleteRegister(t,a),$("#modal-bt-delete-register").off("click"),$("#modal-bt-delete-register").on("click",(async function(e){(await modalDeleteExecute(a)).status&&table.row(i.parents("tr")).remove().draw()}))}));
