document.addEventListener("alpine:init",(()=>{Alpine.data("managerFrm",(()=>({data:{_token:document.head.querySelector("meta[name=csrf-token]").content,_method:null!==document.querySelector('input[name="_method"]')?document.querySelector('input[name="_method"]').value:""},loading:!1,buttonLabel:"Enviar",loadData(){document.querySelector("#file").addEventListener("change",(e=>{$("#frm").valid()}))},submitData(){if($("#frm").valid()){var e=new FormData,t=$("#file")[0].files;e.append("file",t[0]),e.append("_token",document.head.querySelector("meta[name=csrf-token]").content),e.append("_method","post"),this.buttonLabel="Aguarde, enviando arquivo...",this.loading=!0,fetch(document.getElementById("frm").action,{method:"POST",body:e}).then((e=>e.json())).then((e=>{1!=e.status?modalStatus("Algo errado!","Se persistir, fale com o administrador!"):modalStatus("Muito bom!","Arquivo enviado e processado com sucesso!")})).catch((()=>{modalStatus("Error grave!","Se persistir, fale com o administrador!")})).finally((()=>{this.loading=!1,this.buttonLabel="Enviar",document.getElementById("file").value="",table.clear().draw(),table.ajax.reload(),new bootstrap.Modal(document.getElementById("modal-status")).show()}))}}})))}));
