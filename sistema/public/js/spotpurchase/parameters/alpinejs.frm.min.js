document.addEventListener("alpine:init",(()=>{Alpine.data("managerFrm",(()=>({modalStatus:new bootstrap.Modal(document.getElementById("modal-status")),data:{_token:document.head.querySelector("meta[name=csrf-token]").content,_method:null!==document.querySelector('input[name="_method"]')?document.querySelector('input[name="_method"]').value:""},loading:!1,buttonLabel:"Gravar",cleanFields(){this.data.minimum_value="",this.data.order_qtd_column="",this.data.order_detail_qtd_column="",this.data.supplier_qtd_column="",this.data.month_recurrence="",document.getElementById("minimum_value").value="",document.getElementById("order_qtd_column").value="",document.getElementById("order_detail_qtd_column").value="",document.getElementById("supplier_qtd_column").value="",document.getElementById("month_recurrence").value=""},setModalStatus(t,e){document.getElementById("title-modal-status").innerText=t,document.getElementById("desc-status-modal").innerText=e},submitData(){$("#frm").valid()&&(this.buttonLabel="Aguarde...",this.loading=!0,this.data.minimum_value=document.getElementById("minimum_value").value,this.data.order_qtd_column=document.getElementById("order_qtd_column").value,this.data.order_detail_qtd_column=document.getElementById("order_detail_qtd_column").value,this.data.supplier_qtd_column=document.getElementById("supplier_qtd_column").value,this.data.month_recurrence=document.getElementById("month_recurrence").value,fetch(document.getElementById("frm").action,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(this.data)}).then((t=>{1!=t.ok&&this.setModalStatus("Algo errado!","Se persistir, fale com o administrador!"),t.json().then((t=>{t.status?this.setModalStatus("Muito bom!","Configuração aplicada com sucesso!"):this.setModalStatus("Error no processamento!","Se persistir, fale com o administrador!")}))})).catch((()=>{this.setModalStatus("Error grave!","Se persistir, fale com o administrador!")})).finally((()=>{this.loading=!1,this.buttonLabel="Gravar",this.data={},table.clear().draw(),table.ajax.reload(),this.cleanFields(),this.modalStatus.show()})))}})))}));
