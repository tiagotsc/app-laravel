document.addEventListener("alpine:init",(()=>{Alpine.data("managerFrm",(()=>({modalStatus:new bootstrap.Modal(document.getElementById("modal-status")),modalConfirm:new bootstrap.Modal(document.getElementById("modal-confirm")),data:{_token:document.head.querySelector("meta[name=csrf-token]").content},loading:!1,buttonLabel:"Agendar deploy",setModalStatus(t,e){document.getElementById("title-modal-status").innerText=t,document.getElementById("desc-status-modal").innerText=e},save(){this.modalConfirm.hide(),this.buttonLabel="Aguarde...",this.loading=!0,this.data.repository=document.getElementById("repository").value,fetch(document.getElementById("frm").action,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(this.data)}).then((t=>{1!=t.ok&&this.setModalStatus("Algo errado!","Se persistir, fale com o administrador!"),t.json().then((t=>{this.setModalStatus("Muito bom!","Salvo com sucesso!")}))})).catch((()=>{this.setModalStatus("Error grave!","Se persistir, fale com o administrador!")})).finally((()=>{this.loading=!1,this.buttonLabel="Agendar deploy",this.modalStatus.show(),table.clear().draw(),table.ajax.reload(),document.getElementById("repository").value=""}))},submitData(){if($("#frm").valid()){let t=document.getElementById("enveroment").value,e=document.getElementById("repository").value;document.getElementById("env").innerText=t,document.getElementById("repo").innerText=e,this.modalConfirm.show()}}})))}));
